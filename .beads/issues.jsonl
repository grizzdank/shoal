{"id":"bd-14w","title":"Policy engine v0.1 (content filters + tool restrictions)","description":"Implement policy evaluation engine for inbound/outbound content filters and per-agent/per-role tool restrictions, with configurable rules JSON.","notes":"Implemented v0.1 policy evaluation engine at packages/api/src/policies/engine.ts for content filtering (blocked terms + PII detection) and tool restrictions (allow/deny lists + role gates). Added policies.evaluateContent and policies.evaluateTool procedures in packages/api/src/trpc/router.ts backed by enabled policy rules from DB.","status":"closed","priority":1,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:54.694171164Z","created_by":"daveg","updated_at":"2026-02-13T22:10:19.166698198Z","closed_at":"2026-02-13T22:10:19.166595172Z","compaction_level":0,"original_size":0,"labels":["api","policy","security"],"dependencies":[{"issue_id":"bd-14w","depends_on_id":"bd-2ta","type":"blocks","created_at":"2026-02-13T22:02:56.926272868Z","created_by":"daveg"},{"issue_id":"bd-14w","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:54.724268528Z","created_by":"daveg"}]}
{"id":"bd-1a6","title":"Dashboard: Approval queue and audit viewer","description":"Implement approval inbox and searchable audit log UI connected to API endpoints.","notes":"Implemented minimal dashboard approval queue + audit viewer pages with live API integration: packages/dashboard/app/approvals/page.tsx and packages/dashboard/app/audit-log/page.tsx. Added decision actions (approve/reject/expire), pending list refresh, search, and error/loading states.","status":"closed","priority":2,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:55.277847339Z","created_by":"daveg","updated_at":"2026-02-13T22:20:22.745531292Z","closed_at":"2026-02-13T22:20:22.745424302Z","compaction_level":0,"original_size":0,"labels":["approvals","audit","dashboard","ui"],"dependencies":[{"issue_id":"bd-1a6","depends_on_id":"bd-1jp","type":"blocks","created_at":"2026-02-13T22:02:58.155263603Z","created_by":"daveg"},{"issue_id":"bd-1a6","depends_on_id":"bd-2fl","type":"blocks","created_at":"2026-02-13T22:02:58.306771579Z","created_by":"daveg"},{"issue_id":"bd-1a6","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:55.312288920Z","created_by":"daveg"}]}
{"id":"bd-1d0","title":"Search v0.1: hybrid regex + vector over audit/documents","description":"Implement initial hybrid search over audit entries and documents per spec. Define pragmatic v0.1 vector approach and API endpoints.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-13T22:02:55.575792331Z","created_by":"daveg","updated_at":"2026-02-13T22:02:58.631265002Z","compaction_level":0,"original_size":0,"labels":["api","audit","documents","search"],"dependencies":[{"issue_id":"bd-1d0","depends_on_id":"bd-2fl","type":"blocks","created_at":"2026-02-13T22:02:58.528820024Z","created_by":"daveg"},{"issue_id":"bd-1d0","depends_on_id":"bd-3pc","type":"blocks","created_at":"2026-02-13T22:02:58.631244232Z","created_by":"daveg"},{"issue_id":"bd-1d0","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:55.612964442Z","created_by":"daveg"}]}
{"id":"bd-1jp","title":"Approval gates for high-impact actions","description":"Create approval request lifecycle (pending/approved/rejected/expired), block tool execution until decision, and expose approval queue endpoints.","notes":"Implemented approval-gate flows in tRPC approvals router: listPending, checkToolCall (policy-driven gate creation for high-impact tool calls), and decide (approved/rejected/expired with pending-only transition guard). Added audit logging for create/update/check/decision events.","status":"closed","priority":1,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:54.835108989Z","created_by":"daveg","updated_at":"2026-02-13T22:16:41.611369312Z","closed_at":"2026-02-13T22:16:41.611308884Z","compaction_level":0,"original_size":0,"labels":["api","approvals","security"],"dependencies":[{"issue_id":"bd-1jp","depends_on_id":"bd-14w","type":"blocks","created_at":"2026-02-13T22:02:57.075019244Z","created_by":"daveg"},{"issue_id":"bd-1jp","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:54.867932882Z","created_by":"daveg"}]}
{"id":"bd-1li","title":"Deployment hardening: one-command docker compose bootstrap","description":"Ensure fresh-machine bootstrap works with docker compose for openclaw + shoal + postgres + redis. Validate env defaults and startup docs.","notes":"Hardened compose bootstrap for monorepo cold start: switched API/dashboard builds to root context with package Dockerfiles, pinned workspace-aware container commands, added healthchecks and ordered depends_on conditions (postgres/redis->api->dashboard), added CORS/auth env defaults for local compose, and added root .dockerignore to reduce build context. Updated README docker startup notes.","status":"closed","priority":1,"issue_type":"task","assignee":"daveg","created_at":"2026-02-13T22:02:55.745634520Z","created_by":"daveg","updated_at":"2026-02-13T22:30:44.623986257Z","closed_at":"2026-02-13T22:30:44.623920719Z","compaction_level":0,"original_size":0,"labels":["devops","release"],"dependencies":[{"issue_id":"bd-1li","depends_on_id":"bd-2cq","type":"blocks","created_at":"2026-02-13T22:02:58.746274263Z","created_by":"daveg"},{"issue_id":"bd-1li","depends_on_id":"bd-3qf","type":"blocks","created_at":"2026-02-13T22:02:58.894616558Z","created_by":"daveg"},{"issue_id":"bd-1li","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:55.770122432Z","created_by":"daveg"}]}
{"id":"bd-2cq","title":"OpenClaw plugin: governance hook wiring","description":"Replace logging stubs with calls into Shoal governance services at message_received, message_sending, before_tool_call, tool_result_persist, before_agent_start.","notes":"Implemented plugin governance wiring by adding API governance endpoints in packages/api/src/main.ts and service logic in packages/api/src/governance/service.ts for content filtering, tool restriction checks, approval gate creation, and tool-result audit logging. Updated plugin hooks in packages/plugin/src/index.ts to call these endpoints and mutate hook context (block reasons, approvalId, governance prompt injection).","status":"closed","priority":1,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:54.556098156Z","created_by":"daveg","updated_at":"2026-02-13T22:17:56.559136415Z","closed_at":"2026-02-13T22:17:56.559034137Z","compaction_level":0,"original_size":0,"labels":["integration","openclaw","plugin"],"dependencies":[{"issue_id":"bd-2cq","depends_on_id":"bd-14w","type":"blocks","created_at":"2026-02-13T22:02:57.384960087Z","created_by":"daveg"},{"issue_id":"bd-2cq","depends_on_id":"bd-1jp","type":"blocks","created_at":"2026-02-13T22:02:57.539468216Z","created_by":"daveg"},{"issue_id":"bd-2cq","depends_on_id":"bd-2fl","type":"blocks","created_at":"2026-02-13T22:02:57.690879310Z","created_by":"daveg"},{"issue_id":"bd-2cq","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:54.587615325Z","created_by":"daveg"}]}
{"id":"bd-2fl","title":"Audit trail: append-only action and cost logging","description":"Persist append-only audit entries for agent actions, tool calls, approval decisions, and governance outcomes; include token cost and reasoning detail where available.","notes":"Enforced append-only audit behavior by removing update/delete audit procedures and centralizing inserts through audit logger utility (packages/api/src/audit/logging.ts). Added audit event logging across policy evaluations and approval gate lifecycle.","status":"closed","priority":1,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:54.985313736Z","created_by":"daveg","updated_at":"2026-02-13T22:16:41.779893345Z","closed_at":"2026-02-13T22:16:41.779833734Z","compaction_level":0,"original_size":0,"labels":["api","audit","security"],"dependencies":[{"issue_id":"bd-2fl","depends_on_id":"bd-2ta","type":"blocks","created_at":"2026-02-13T22:02:57.235203628Z","created_by":"daveg"},{"issue_id":"bd-2fl","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:55.018405581Z","created_by":"daveg"}]}
{"id":"bd-2kd","title":"ARISE v0.1 evidence pack and sign-off checklist","description":"Produce traceable evidence for P.IM, P.AC, V.IA, G.AC, D.CM controls and partner review checklist for Ed/Graeme.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-13T22:02:56.094698974Z","created_by":"daveg","updated_at":"2026-02-13T22:02:59.374523766Z","compaction_level":0,"original_size":0,"labels":["arise","compliance","release"],"dependencies":[{"issue_id":"bd-2kd","depends_on_id":"bd-31v","type":"blocks","created_at":"2026-02-13T22:02:59.374503566Z","created_by":"daveg"},{"issue_id":"bd-2kd","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:56.126688899Z","created_by":"daveg"}]}
{"id":"bd-2ta","title":"tRPC API: implement real CRUD + validation","description":"Replace scaffold CRUD responses with DB-backed queries/mutations and Zod validation. Include pagination/filtering for list endpoints.","notes":"Replaced scaffold CRUD with Drizzle-backed routers for users/agents/policies/audit/approvals/documents in packages/api/src/trpc/router.ts. Added Zod validation for create/update/get/delete, list pagination (limit/offset), and query filtering by key text fields. Procedures now return real persisted data with totals for list responses.","status":"closed","priority":1,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:54.216281283Z","created_by":"daveg","updated_at":"2026-02-13T22:09:02.382896711Z","closed_at":"2026-02-13T22:09:02.382791375Z","compaction_level":0,"original_size":0,"labels":["api","trpc"],"dependencies":[{"issue_id":"bd-2ta","depends_on_id":"bd-3ng","type":"blocks","created_at":"2026-02-13T22:02:56.433220155Z","created_by":"daveg"},{"issue_id":"bd-2ta","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:54.234383505Z","created_by":"daveg"}]}
{"id":"bd-2xf","title":"Spec traceability: map v0.1 requirements to implementation checklist","description":"Create a requirements-to-backlog matrix from shoal-v0.1-spec.md, including success criteria and ARISE control mapping (P.IM, P.AC, V.IA, G.AC, D.CM).","notes":"Completed with docs/spec-traceability-v0.1.md mapping spec scope, ARISE controls, success criteria, and execution order to backlog issues.","status":"closed","priority":1,"issue_type":"task","assignee":"daveg","created_at":"2026-02-13T22:02:54.005741709Z","created_by":"daveg","updated_at":"2026-02-13T22:04:09.189671732Z","closed_at":"2026-02-13T22:04:09.189570048Z","compaction_level":0,"original_size":0,"labels":["planning","spec"],"dependencies":[{"issue_id":"bd-2xf","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:54.036675350Z","created_by":"daveg"}]}
{"id":"bd-31v","title":"Test suite and release gates for v0.1","description":"Add integration tests for governance-critical flows (policy, approval, audit), and CI gates for lint/typecheck/tests/migrations.","notes":"Implemented release gates and governance-critical tests: added API tests for policy evaluation and approval state transitions (packages/api/src/policies/engine.test.ts, packages/api/src/approvals/state.test.ts), added approval transition helper used by tRPC decide flow (packages/api/src/approvals/state.ts), added root scripts for test/db:check/ci:check, added API db:check + test scripts, standardized package lint scripts to deterministic TS checks, and added CI workflow at .github/workflows/ci.yml running lint/typecheck/test/db:check.","status":"closed","priority":1,"issue_type":"task","assignee":"daveg","created_at":"2026-02-13T22:02:55.905747907Z","created_by":"daveg","updated_at":"2026-02-13T22:34:39.333476208Z","closed_at":"2026-02-13T22:34:39.333371932Z","compaction_level":0,"original_size":0,"labels":["quality","release","testing"],"dependencies":[{"issue_id":"bd-31v","depends_on_id":"bd-1a6","type":"blocks","created_at":"2026-02-13T22:02:59.209294865Z","created_by":"daveg"},{"issue_id":"bd-31v","depends_on_id":"bd-2cq","type":"blocks","created_at":"2026-02-13T22:02:59.054598944Z","created_by":"daveg"},{"issue_id":"bd-31v","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:55.939306022Z","created_by":"daveg"}]}
{"id":"bd-385","title":"RBAC enforcement (admin/member/viewer)","description":"Enforce role-based permissions across API procedures and admin actions per spec. Include unauthorized response handling and tests.","notes":"Implemented RBAC enforcement in tRPC router via auth/role middleware (admin/member/viewer). Added role-aware access controls per entity procedures, extended API context with x-shoal-user-role parsing, and updated dashboard auth/session + tRPC headers to propagate user role and identity.","status":"closed","priority":1,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:54.431390544Z","created_by":"daveg","updated_at":"2026-02-13T22:11:25.097433037Z","closed_at":"2026-02-13T22:11:25.097372388Z","compaction_level":0,"original_size":0,"labels":["api","auth","security"],"dependencies":[{"issue_id":"bd-385","depends_on_id":"bd-3b4","type":"blocks","created_at":"2026-02-13T22:02:56.770294468Z","created_by":"daveg"},{"issue_id":"bd-385","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:54.461035149Z","created_by":"daveg"}]}
{"id":"bd-3b4","title":"Auth.js integration for dashboard access","description":"Implement Auth.js providers and session wiring for admin dashboard sign-in. Configure secrets/envs and authenticated API context.","notes":"Completed Auth.js integration baseline: NextAuth handlers wired at /api/auth/[...nextauth], dashboard layout requires authenticated session, SessionProvider receives server session, Google provider env wiring added, and tRPC client sends authenticated x-shoal-user-id header from session.","status":"closed","priority":1,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:54.301827704Z","created_by":"daveg","updated_at":"2026-02-13T22:09:29.347400576Z","closed_at":"2026-02-13T22:09:29.347340884Z","compaction_level":0,"original_size":0,"labels":["api","auth","dashboard"],"dependencies":[{"issue_id":"bd-3b4","depends_on_id":"bd-2xf","type":"blocks","created_at":"2026-02-13T22:02:56.599358115Z","created_by":"daveg"},{"issue_id":"bd-3b4","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:54.335733708Z","created_by":"daveg"}]}
{"id":"bd-3ng","title":"Data model parity with v0.1 spec","description":"Align Drizzle schema to spec fields for User, Agent, Policy, AuditEntry, ApprovalRequest, and Document. Add/adjust migrations and constraints for single-tenant assumptions.","notes":"Completed schema parity updates in packages/api/src/db/schema.ts and packages/shared/src/index.ts; generated migration at packages/api/drizzle/0000_conscious_madame_web.sql; workspace typecheck passes.","status":"closed","priority":1,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:54.103118161Z","created_by":"daveg","updated_at":"2026-02-13T22:05:12.612823791Z","closed_at":"2026-02-13T22:05:12.612712202Z","compaction_level":0,"original_size":0,"labels":["api","db"],"dependencies":[{"issue_id":"bd-3ng","depends_on_id":"bd-2xf","type":"blocks","created_at":"2026-02-13T22:02:56.284247167Z","created_by":"daveg"},{"issue_id":"bd-3ng","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:54.128936826Z","created_by":"daveg"}]}
{"id":"bd-3pc","title":"Document upload and metadata management (PDF/MD/TXT)","description":"Implement file upload, metadata persistence, storage path handling, and dashboard listing for org documents used as agent context.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-13T22:02:55.428435789Z","created_by":"daveg","updated_at":"2026-02-13T22:02:58.421263057Z","compaction_level":0,"original_size":0,"labels":["api","dashboard","documents"],"dependencies":[{"issue_id":"bd-3pc","depends_on_id":"bd-2ta","type":"blocks","created_at":"2026-02-13T22:02:58.421246625Z","created_by":"daveg"},{"issue_id":"bd-3pc","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:55.457582119Z","created_by":"daveg"}]}
{"id":"bd-3qf","title":"Dashboard: Users, Agents, Policies CRUD","description":"Replace placeholder pages with usable admin workflows for user role management, agent provisioning, and policy management.","notes":"Completed Users/Agents/Policies CRUD dashboard workflows with create/list/edit/delete actions and form-based management. Implemented pages at packages/dashboard/app/users/page.tsx, packages/dashboard/app/agents/page.tsx, and enhanced packages/dashboard/app/policies/page.tsx with edit/delete. Set dashboard dev default session role to admin in packages/dashboard/lib/auth.ts for local RBAC-compatible testing.","status":"closed","priority":2,"issue_type":"feature","assignee":"daveg","created_at":"2026-02-13T22:02:55.124211922Z","created_by":"daveg","updated_at":"2026-02-13T22:23:40.916003764Z","closed_at":"2026-02-13T22:23:40.915887869Z","compaction_level":0,"original_size":0,"labels":["dashboard","ui"],"dependencies":[{"issue_id":"bd-3qf","depends_on_id":"bd-2ta","type":"blocks","created_at":"2026-02-13T22:02:57.832919157Z","created_by":"daveg"},{"issue_id":"bd-3qf","depends_on_id":"bd-385","type":"blocks","created_at":"2026-02-13T22:02:57.993044516Z","created_by":"daveg"},{"issue_id":"bd-3qf","depends_on_id":"bd-x2f","type":"parent-child","created_at":"2026-02-13T22:02:55.152005587Z","created_by":"daveg"}]}
{"id":"bd-x2f","title":"Backlog: Shoal v0.1 delivery","description":"Parent epic tracking implementation of shoal-v0.1-spec.md (v0.1.1 dated 2026-02-13).","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-13T22:02:28.131706145Z","created_by":"daveg","updated_at":"2026-02-13T22:02:28.162285610Z","compaction_level":0,"original_size":0,"labels":["epic","planning","spec"]}
